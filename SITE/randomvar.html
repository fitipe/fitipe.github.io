<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Random Video Player</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        #canvas-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
        }

        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>

    <script>
        let media;
        let isMobile = /Mobi|Android/i.test(navigator.userAgent);
				var sqr;

        function setup() {
            sqr = Math.min(windowWidth, windowHeight);
            let canvas = createCanvas(sqr, sqr);
            canvas.parent("canvas-container");
            preloadMedia();
        }

        function preloadMedia() {
				    if (isMobile) {
				        // display a random image if on mobile
				        let images = ['./0.jpg','./1.jpg','./2.jpg','./3.jpg'];
				        let randomImage = images[Math.floor(Math.random() * images.length)];
				        media = createElement('img');
				        media.attribute('src', randomImage);
				        media.attribute('width', sqr);
				        media.attribute('height', sqr);
				        media.hide();
				        media.parent("canvas-container");
				        setTimeout(preloadMedia, 5000);
				    } else {
				        // preload a random video if on desktop
				        let videos = ['./0.mp4','./1.mp4','./2.mp4'];
				        let randomVideo = videos[Math.floor(Math.random() * videos.length)];
				        media = createVideo(randomVideo);
				        media.elt.muted = true;
				        media.hide();
				        media.loop();
				        document.body.appendChild(media.elt);
				        setTimeout(preloadMedia, 5000);
				    }
				}

        function draw() {
            if (media !== undefined) {
                // clear the canvas
		clear();

                // draw the current media
                image(media, 0, 0, sqr, sqr);
            }
        }
    </script>
</body>
</html>
